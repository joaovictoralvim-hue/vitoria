<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5.0, user-scalable=yes"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Dedicat√≥ria">
<meta name="theme-color" content="#000">
<title>Dedicat√≥ria</title>
<link href="https://fonts.googleapis.com/css2?family=Ink+Free&display=swap" rel="stylesheet">
</style>
<style>
    :root{--bg:#000; --yellow:#ffff00; --muted:#666}
    html,body{height:100%;margin:0;padding:0;background:var(--bg);color:#fff;font-family:'Ink Free','Apple Color Emoji','Segoe UI Emoji','Noto Color Emoji',Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    #backgroundImage{position:fixed;inset:0;background-size:contain;background-position:center;background-repeat:no-repeat;opacity:1;z-index:1}
    #lyrics{position:fixed;top:0;left:50%;transform:translateX(-50%);width:90%;max-width:900px;height:100vh;overflow-y:auto;padding:40px 30px;text-align:center;font-size:1.05rem;line-height:2rem;color:var(--yellow);margin:0;box-sizing:border-box;background:rgba(0,0,0,0.8);z-index:2;opacity:1;scrollbar-width:thin;scrollbar-color:var(--yellow) #000}
    #lyrics::-webkit-scrollbar{width:8px}
    #lyrics::-webkit-scrollbar-track{background:#000}
    #lyrics::-webkit-scrollbar-thumb{background:var(--yellow);border-radius:10px;box-shadow:0 0 10px var(--yellow)}
    .neon{animation:neonGlow 4s ease-in-out infinite;will-change:text-shadow}
    @keyframes neonGlow{0%{text-shadow:0 0 4px rgba(0,0,0,0.6),0 0 8px rgba(255,255,0,0.28)}50%{text-shadow:0 0 6px rgba(0,0,0,0.6),0 0 12px rgba(255,255,0,0.45)}100%{text-shadow:0 0 4px rgba(0,0,0,0.6),0 0 8px rgba(255,255,0,0.28)}}
    .lyric-line{cursor:pointer;transition:all .25s ease;position:relative}
    .lyric-line:hover{text-shadow:0 0 2px #000,0 0 4px #000,0 0 15px #ff00ff;filter:brightness(1.08)}
    .lyric-text{display:inline-block}
    #lyrics.visible{opacity:1;visibility:visible;pointer-events:auto}
    #lyrics.hidden-bg{background:rgba(0,0,0,0);opacity:0;pointer-events:auto;text-shadow:none}
    #backButton{position:fixed;bottom:20px;right:20px;padding:10px 16px;border:2px solid #fff;background:none;color:#fff;font-family:'Ink Free',sans-serif;font-size:1.05rem;cursor:pointer;z-index:100;opacity:1;transition:opacity .3s ease,transform .15s ease;text-shadow:0 0 5px #fff;box-shadow:0 0 10px #fff}
    #backButton:hover{background:rgba(255,255,255,0.08)}

    /* Response buttons below dedication */
    #responseButtons{display:flex;gap:12px;justify-content:center;margin-top:18px}
    .response-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border:2px solid var(--yellow);background:rgba(0,0,0,0.25);color:var(--yellow);font-family:'Ink Free',sans-serif;border-radius:8px;cursor:pointer;text-decoration:none;box-shadow:0 0 6px rgba(255,255,0,0.06);transition:transform .15s ease,box-shadow .15s ease}
    .response-btn .icon{font-size:1.15rem}
    .response-btn:hover{transform:translateY(-4px);box-shadow:0 6px 18px rgba(255,255,0,0.18)}

    /* touch and emoji / mobile support */
    button, .response-btn, .lyric-line { -webkit-tap-highlight-color: transparent; touch-action: manipulation; }

    /* Melhorias para iOS */
    @supports (-webkit-touch-callout: none) {
        /* iOS Safari */
        #lyrics { -webkit-user-select: none; -webkit-touch-callout: none; }
        html { -webkit-text-size-adjust: 100%; }
        input, button, textarea, select { font-size: 16px; }
    }

    @media (max-width:900px){
        #lyrics{padding:28px 18px;font-size:1rem;line-height:1.6rem;width:94%}
        .response-btn{padding:10px 12px;font-size:0.98rem}
        #backButton{padding:12px 14px}
    }

    @media (max-width:768px) {
        #lyrics{padding:24px 16px;font-size:0.95rem;line-height:1.55rem;width:100%;max-width:none;left:0;transform:none}
        #lyricsContainer{font-size:0.95rem;line-height:1.55rem}
        #responseButtons{flex-wrap:wrap;gap:10px;margin-top:16px}
        .response-btn{padding:12px 16px;font-size:0.95rem;min-height:44px}
        #backButton{padding:12px 16px;font-size:0.95rem;bottom:max(12px,env(safe-area-inset-bottom,12px));right:12px}
    }

    @media (max-width:480px){
        html, body { font-size:12px; }
        #lyrics{padding:16px 10px;font-size:0.8rem;line-height:1.4rem;max-width:100%;width:100%;left:0;transform:none;top:0;height:100vh}
        #lyricsContainer{font-size:0.8rem;line-height:1.4rem}
        #songTitle{font-size:0.85rem;display:block;margin-bottom:12px}
        #backgroundImage { background-size:cover; }
        /* Normaliza espa√ßamento/quebra de texto em iPhone para ficar igual ao desktop */
        #lyrics, #lyricsContainer, .lyric-line, .lyric-text {
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
            word-spacing: normal !important;
            letter-spacing: normal !important;
            hyphens: none !important;
            white-space: pre-line !important;
            display: block;
            text-align: center;
            line-height: 1.05 !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        .stanza .lyric-line { margin: 0; padding: 0; line-height: 1.02 !important; }
        .stanza + .stanza { margin-top: 0.6rem; }
        #responseButtons{flex-direction:column;gap:8px;margin-top:14px;align-items:stretch}
        .response-btn{width:100%;min-height:44px;padding:10px 12px;font-size:0.8rem;justify-content:center}
        #backButton{padding:10px 12px;font-size:0.8rem;min-height:44px;bottom:max(12px,env(safe-area-inset-bottom,12px));right:8px}
        .lyric-line:hover{text-shadow:0 0 2px #000,0 0 4px #000,0 0 15px #ff00ff;filter:brightness(1.08)}
    }

    @media (max-width:380px) {
        #lyrics{padding:14px 10px;font-size:0.75rem;line-height:1.35rem}
        #lyricsContainer{font-size:0.75rem;line-height:1.35rem}
        #songTitle{font-size:0.8rem}
        .response-btn{padding:10px 12px;font-size:0.75rem;min-height:40px}
        #backButton{padding:10px 12px;font-size:0.75rem;min-height:40px;bottom:max(10px,env(safe-area-inset-bottom,10px))}
    }

    /* Landscape mode adjustments */
    @media (max-height: 500px) and (orientation: landscape) {
        #lyrics{padding:10px 10px;font-size:0.7rem;line-height:1.3rem;height:auto;max-height:calc(100vh - 60px)}
        #responseButtons{gap:6px;margin-top:10px;flex-wrap:wrap}
        .response-btn{padding:6px 10px;font-size:0.65rem;min-height:36px}
        #backButton{padding:6px 10px;font-size:0.65rem;bottom:6px}
    }
</style>
</head>
<body>

<div id="backgroundImage"></div>

<div id="lyrics" class="neon" aria-live="polite">
    <div style="margin-bottom:20px;">
        <strong id="songTitle">Dedicat√≥ria</strong>
    </div>
    <div id="lyricsContainer" style="white-space: pre-wrap; font-family: inherit; font-size:0.95rem; line-height:1.6rem; cursor:pointer;"></div>
    <div id="responseButtons" aria-hidden="true">
        <button class="response-btn" id="btnYes" type="button"><span class="icon">üíñ</span><span class="label">Sim</span></button>
        <button class="response-btn" id="btnSure" type="button"><span class="icon">‚ú®</span><span class="label">Claro</span></button>
    </div>
</div>

<button id="backButton">Back</button>

<script>
    // Ajuste do background: tenta carregar 'vitoria' com extens√µes comuns
    (function(){
        const bg = document.getElementById('backgroundImage');
        const candidates = [
            './vitoria.jpg',
            './vitoria.png',
            './vitoria.webp',
            './09aed15363efc67c17ab7baf8efa4a13.jpg' // fallback original
        ];

        let idx = 0;
        function tryLoad() {
            if (idx >= candidates.length) return;
            const url = candidates[idx];
            const img = new Image();
            img.onload = function() {
                bg.style.backgroundImage = `url('${url}')`;
            };
            img.onerror = function() {
                idx++;
                tryLoad();
            };
            // Start loading
            img.src = url;
        }

        tryLoad();
    })();

    // Dados da dedicat√≥ria em linhas (como letras de m√∫sica)
    const dedicatoryLines = [
        "Vit√≥ria,",
        "",
        "Desde dezembro,",
        "quando o tempo resolveu ser gentil,",
        "teu sorriso surgiu de repente",
        "e fez morada em mim.",
        "Um sorriso que acalma,",
        "que ilumina sem esfor√ßo,",
        "que vira abrigo nos meus pensamentos.",
        "",
        "Teu olhar‚Ä¶",
        "h√° nele um sil√™ncio profundo,",
        "uma verdade que n√£o se explica.",
        "Quando encontra o meu,",
        "o mundo desacelera,",
        "o cora√ß√£o entende",
        "aquilo que as palavras n√£o alcan√ßam.",
        "",
        "Voc√™ chegou leve,",
        "sem promessas exageradas,",
        "e ficou intensa,",
        "ocupando espa√ßos que eu nem sabia vazios.",
        "Entre um sorriso e um olhar,",
        "nasceu algo bonito, sincero,",
        "algo que s√≥ cresce.",
        "",
        "Se isso √© amor,",
        "ele tem ritmo calmo,",
        "tem dezembro como come√ßo,",
        "tem brilho nos olhos",
        "e atende pelo nome de Vit√≥ria.",
        "",
        "Quer namorar comigo? üíñ"
        ];

    function renderDedication(lines) {
        const container = document.getElementById('lyricsContainer');
        container.innerHTML = '';
        // Group into stanzas for proper stanza layout on mobile
        let stanza = null;
        lines.forEach(line => {
            const isEmpty = line === '';
            if (isEmpty) {
                if (stanza) {
                    container.appendChild(stanza);
                    stanza = null;
                } else {
                    const gap = document.createElement('div');
                    gap.style.height = window.matchMedia('(max-width:480px)').matches ? '0.18rem' : '0.8rem';
                    container.appendChild(gap);
                }
            } else {
                if (!stanza) {
                    stanza = document.createElement('div');
                    stanza.className = 'stanza';
                }
                const div = document.createElement('div');
                div.className = 'lyric-line';
                const span = document.createElement('span');
                span.className = 'lyric-text';
                span.textContent = line;
                div.appendChild(span);
                stanza.appendChild(div);
            }
        });
        if (stanza) container.appendChild(stanza);
    }

    document.addEventListener('DOMContentLoaded', () => {
        // Renderiza dedicat√≥ria ao carregar
        renderDedication(dedicatoryLines);
        
        // Bot√£o back
        const backButton = document.getElementById('backButton');
        backButton.addEventListener('click', () => {
            window.location.href = 'index.html';
        });

        // Bot√µes "Sim" / "Claro" ‚Äî abrem a p√°gina oculto na mesma aba
        const btnYes = document.getElementById('btnYes');
        const btnSure = document.getElementById('btnSure');
        function openOcultoNewTab() {
            try { localStorage.setItem('allowOculto', '1'); } catch(e) {}
            window.location.href = 'oculto.html';
        }
        if (btnYes) btnYes.addEventListener('click', openOcultoNewTab);
        if (btnSure) btnSure.addEventListener('click', openOcultoNewTab);

        // Mouseleave: oculta letras ao sair do mouse (igual √†s outras abas)
        const lyrics = document.getElementById('lyrics');
        
        function updateLyricsHoverState(clientX, clientY) {
            const rect = lyrics.getBoundingClientRect();
            const inside = clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;
            if (inside) {
                lyrics.classList.add('visible');
                lyrics.classList.remove('hidden-bg');
            } else {
                lyrics.classList.remove('visible');
                lyrics.classList.add('hidden-bg');
            }
        }

        const isTouch = ('ontouchstart' in window) || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints;
        if (!isTouch) {
            document.addEventListener('mousemove', (e) => {
                updateLyricsHoverState(e.clientX, e.clientY);
            });

            document.addEventListener('mouseout', (e) => {
                if (!e.relatedTarget) {
                    lyrics.classList.remove('visible');
                    lyrics.classList.add('hidden-bg');
                }
            });
        } else {
            // Em touch devices, mant√©m as letras sempre vis√≠veis para melhor UX
            document.documentElement.classList.add('touch-device');
            lyrics.classList.add('visible');
            lyrics.classList.remove('hidden-bg');
            // Melhor suporte para viewport em iOS
            const viewportMeta = document.querySelector('meta[name="viewport"]');
            if (viewportMeta) {
                viewportMeta.setAttribute('content', 'width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5.0, user-scalable=yes');
            }
        }
    });
</script>
</body>
</html>